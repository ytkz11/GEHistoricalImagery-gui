# 小白影像下载器 (GEHistoricalImagery GUI)

一个基于PyQt5的Google Earth历史影像下载工具，提供友好的图形界面来下载指定区域的卫星影像。

## 功能特点

- 🗺️ **交互式地图界面**：基于Folium的Web地图，支持绘制下载区域
- 📅 **历史影像下载**：支持下载指定日期范围的Google Earth历史影像
- 🎯 **精确区域选择**：支持多边形绘制，精确选择下载区域
- 🔄 **坐标系转换**：内置坐标转换功能，支持多种坐标系
- 📦 **一键打包**：提供完整的打包解决方案，生成独立可执行程序
- 🎨 **现代化界面**：简洁美观的用户界面，操作简单直观

## 系统要求

- Windows 操作系统
- Python 3.6 或更高版本
- 网络连接（用于地图显示和影像下载）

## 安装依赖

### 方法一：使用requirements.txt
```bash
pip install -r requirements.txt
```

### 方法二：手动安装
```bash
pip install PyQt5 folium branca jinja2 pyinstaller requests numpy
```

## 使用方法

### 直接运行
```bash
python map_app.py
```

### 主要操作步骤

1. **启动程序**：运行`map_app.py`
2. **设置参数**：
   - 选择缩放级别（1-20）
   - 设置开始和结束日期
3. **选择区域**：在地图上绘制多边形选择下载区域
4. **开始下载**：点击"开始下载"按钮
5. **查看结果**：下载完成后在指定目录查看影像文件

## 文件结构

```
GEHistoricalImagery-gui/
├── map_app.py              # 主程序文件
├── coord_convert.py        # 坐标转换模块
├── GEHistoricalImagery.exe # 核心下载引擎
├── gdal/                   # GDAL库文件
├── resources/              # 资源文件
│   ├── icon.ico           # 应用程序图标
│   ├── logo.ico           # 备用图标
│   └── link.jpg           # 关于页面图片
├── requirements.txt        # Python依赖列表
├── build_package.py        # 打包脚本
```

## 打包部署

本项目提供多种打包方式，可以将应用程序打包成独立的可执行文件：

### 推荐方式：PowerShell脚本
```powershell
.\pack.ps1
```

## 界面说明

### 主界面
- **缩放级别**：控制下载影像的分辨率（级别越高，分辨率越高）
- **开始日期/结束日期**：设置下载影像的时间范围
- **更多信息**：查看软件信息和开发者信息
- **地图区域**：交互式地图，用于选择下载区域
- **开始下载**：执行下载任务

### 操作提示
- 在地图上绘制多边形来选择下载区域
- 支持缩放和平移地图
- 可以重新绘制选择区域

## 技术架构

- **界面框架**：PyQt5
- **地图组件**：Folium + QWebEngineView
- **坐标处理**：自定义坐标转换模块
- **下载引擎**：GEHistoricalImagery.exe
- **打包工具**：PyInstaller

## 开发者信息

- **开发者**：ytkz
- **项目类型**：桌面应用程序
- **开发语言**：Python
- **界面库**：PyQt5

## 注意事项

1. **网络要求**：需要稳定的网络连接访问Google Earth服务
2. **系统权限**：某些操作可能需要管理员权限
3. **存储空间**：确保有足够的磁盘空间存储下载的影像
4. **使用限制**：请遵守Google Earth的使用条款

## 故障排除

### 常见问题

1. **程序无法启动**
   - 检查Python环境是否正确安装
   - 确认所有依赖包已安装
   - 尝试以管理员身份运行

2. **地图无法显示**
   - 检查网络连接
   - 确认防火墙设置
   - 尝试刷新页面

3. **下载失败**
   - 检查网络连接稳定性
   - 确认选择区域是否合理
   - 检查日期范围设置

4. **打包失败**
   - 确认PyInstaller已正确安装
   - 检查所有必要文件是否存在
   - 查看错误日志信息

## 更新日志

- **v1.0**：初始版本，基本功能实现
- 支持交互式地图选择区域
- 支持历史影像下载
- 提供完整打包解决方案

## 许可证

本项目仅供学习和研究使用，请遵守相关法律法规和服务条款。

---

如有问题或建议，欢迎反馈！